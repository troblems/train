<!DOCTYPE html>


      <html lang="en-us">

      <head>

        <meta charset="UTF-8">
        <title>Train homerk, yo</title>
        <script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>
        <link rel="stylesheet" type="text/css" href=style.css>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.2.1.js"></script>
      </head>

<body>


  <div class="container">
    <div class="jumbotron">
      <h1 class="text-center">Trains are coming to town!</h1>
    </div>

    <div class="row">
      <div class="col-md-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Add Train</h3>
          </div>
          <div class="panel-body">
            <form role="form">
              <div class="form-group">
                <label for="nameForm">Train Name: </label>
                <input type="text" class="form-control" id="nameForm">
              </div>
              <div class="form-group">
                <label for="destForm">Destination: </label>
                <input type="text" class="form-control" id="destForm">
              </div>
              <div class="form-group">
                <label for="timeForm">First train time (military): </label>
                <input type="number" class="form-control" id="timeForm">
              </div>
              <div class="form-group">
                <label for="freqForm">Frequencey (mins): </label>
                <input type="number" class="form-control" id="freqForm">
              </div>
              <button type="submit" class="btn btn-primary" id="addTrain">Submit</button>
            </form>
          </div>
        </div>
      </div>
      <div class="col-md-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Current Schedule</h3>
          </div>
          <div class="panel-body" id = "trains">
            <h2 id="nameForm">Circle Line</h2>
            <h2 id="destForm">Hammersmith</h2>
            <h2 id="timeForm">0910</h2>
            <h2 id="freqForm">10</h2>

          </div>
        </div>
      </div>
    </div>





    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyDSpLwA_dJgGIBWzg_DQ5eL5xXszTp2XVE",
        authDomain: "trains-bfa3d.firebaseapp.com",
        databaseURL: "https://trains-bfa3d.firebaseio.com",
        projectId: "trains-bfa3d",
        storageBucket: "trains-bfa3d.appspot.com",
        messagingSenderId: "634873071153"
      };
      firebase.initializeApp(config);
      var database = firebase.database();


      // Initial Values
      var name = "";
      var dest = "";
      var time = 0;
      var freq = 0;

      // Capture Button Click
      $("#addTrain").on("click", function() {
        // Don't refresh the page!
        event.preventDefault();

        // YOUR TASK!!!
        // Code in the logic for storing and retrieving the most recent user.
        // Don't forget to provide initial data to your Firebase database.
        name = $("#nameForm").val().trim();
        dest = $("#destForm").val().trim();
        time = $("#timeForm").val().trim();
        freq = $("#freqForm").val().trim();

        database.ref().push({
          name: name,
          dest: dest,
          time: time,
          freq: freq
        });

      });

      // Firebase watcher + initial loader HINT: .on("value")
      database.ref().on("child_added", function(snapshot) {

        // Log everything that's coming out of snapshot
        console.log(snapshot.val());
        console.log(snapshot.val().name);
        console.log(snapshot.val().dest);
        console.log(snapshot.val().time);
        console.log(snapshot.val().freq);

        // Change the HTML to reflect
        $("#nameForm").html(snapshot.val().name);
        $("#destForm").html(snapshot.val().dest);
        $("#timeForm").html(snapshot.val().time);
        $("#freqForm").html(snapshot.val().freq);

        // Handle the errors
      }, function(errorObject) {
        console.log("Errors handled: " + errorObject.code);
      });
      </script>

      </body>

      </html>
